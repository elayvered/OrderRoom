:root{
  --bg:#f6f8fb; --card:#fff; --ink:#0f172a; --ink-weak:#64748b;
  --border:#e5e7eb; --shadow:0 8px 28px rgba(2,8,23,.08);
  --primary:#0b5fff; --success:#11a36a;
  --chip:#eef2f8;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Heebo,Arial,sans-serif;line-height:1.45}
.app-header{position:sticky;top:0;z-index:10;background:#fff;box-shadow:0 1px 0 var(--border);display:flex;align-items:center;gap:12px;padding:12px 14px}
.app-header .brand{display:flex;align-items:center;gap:12px;margin-inline-start:auto;cursor:pointer}
.app-header img{height:32px;width:auto;display:block}
.app-header .meta h1{font-size:18px;margin:0}
.app-header .meta .now{font-size:12px;color:var(--ink-weak)}

.view{display:none;padding:12px;max-width:940px;margin:0 auto}
.view.active{display:block}

.card{background:var(--card);border:1px solid var(--border);border-radius:18px;box-shadow:var(--shadow);padding:14px;margin:10px 0}
.card h2{margin:4px 0 8px 0;font-size:18px}

.btn{appearance:none;border:0;border-radius:14px;padding:12px 16px;background:#e9eef7;color:#0b1a2b;font-weight:800;cursor:pointer}
.btn.primary{background:var(--primary);color:#fff}
.btn.success{background:var(--success);color:#fff}
.btn.ghost{background:transparent;border:1px solid var(--border);color:var(--ink)}
.btn.icon img{width:18px;height:18px;margin-left:6px}
.btn.menu-btn{display:flex;align-items:center;gap:8px}

.chip{background:var(--chip);border:1px solid var(--border);padding:8px 12px;border-radius:999px;color:var(--ink)}

.supplier-grid{display:grid;gap:10px;grid-template-columns:repeat(2,minmax(0,1fr))}
.supplier-grid.two-col{grid-template-columns:repeat(2,minmax(0,1fr))}
.supplier{border:1px solid var(--border);border-radius:14px;padding:12px;background:#fff;cursor:pointer;font-weight:800}
.supplier:hover{box-shadow:var(--shadow)}

.order-head .order-title{display:flex;align-items:center;gap:10px;justify-content:space-between}
.inline-controls{display:flex;align-items:center;gap:8px;margin-top:8px}
.branch-toggle{display:flex;gap:6px}
.branch-toggle .chip{cursor:pointer}
.branch-toggle .chip.active{background:var(--primary);color:#fff;border-color:var(--primary)}

.items-row{display:flex;align-items:center;gap:8px;justify-content:space-between;border-bottom:1px dashed var(--border);padding:10px 0}
.item-name{font-weight:800;font-size:18px}
.qty{display:flex;align-items:center;gap:8px}
.qty input{width:84px;height:44px;padding:8px 10px;border-radius:12px;border:1px solid var(--border);font-size:18px}
.mode{display:flex;gap:8px}
.mode .toggle{display:flex;align-items:center;gap:6px;padding:8px 12px;border:1px solid var(--border);border-radius:12px;background:#fff;cursor:pointer;font-weight:800}
.mode .toggle.active{border-color:var(--primary);color:var(--primary);background:#eef4ff}
.mode .toggle img{width:18px;height:18px}

textarea{width:100%;border:1px solid var(--border);border-radius:12px;padding:10px;font-size:16px}

.actions-bar{position:sticky;bottom:0;inset-inline:0;z-index:5;background:rgba(246,248,251,.9);backdrop-filter:blur(6px);padding:10px;display:flex;gap:10px;justify-content:space-between;border-top:1px solid var(--border)}

.backdrop{position:fixed;inset:0;background:rgba(0,10,20,.35);z-index:20}
.sheet{position:fixed;z-index:30;background:#fff;border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow);padding:12px;min-width:240px}
.sheet.wide{min-width:320px}
.sheet-item{display:block;width:100%;text-align:right;background:#fff;border:1px solid var(--border);padding:10px;border-radius:10px;margin:6px 0;cursor:pointer;font-weight:800}
.chips{display:flex;gap:8px}
.chips .chip{cursor:pointer}
.chips .chip.active{background:var(--primary);color:#fff;border-color:var(--primary)}

.history .h-item{border:1px solid var(--border);border-radius:12px;padding:10px;margin:8px 0}
.history .h-item .row{display:flex;justify-content:space-between;gap:8px}

@media(min-width:900px){
  .supplier-grid{grid-template-columns:repeat(3,minmax(0,1fr))}
}
.modal {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: white;
  padding: 20px;
  border-radius: 16px;
  box-shadow: 0 0 20px rgba(0,0,0,0.3);
  z-index: 1001;
  width: 90%;
  max-width: 400px;
}
#sendPicker {
  position: fixed !important;
  top: 50% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  right: auto !important;
  width: 90%;
  max-width: 400px;
}

.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.5);
  z-index: 1000;
}
