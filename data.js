// v6.2.7 data & rules
export const BRANCHES = ["הילס", "נורדאו"];

export const SUPPLIERS = [
  {
    "id": "eastwest",
    "name": "מזרח מערב",
    "phone": "+972504320036",
    "email": "",
    "allowedBranches": [
      "הילס",
      "נורדאו"
    ],
    "orderToDelivery": {
      "שני": "חמישי",
      "חמישי": "שני"
    },
    "deliveryLockedDays": [],
    "flexibleOrder": false,
    "items": [
      "אבקת וואסבי",
      "א. ביצים לאיון",
      "אטריות אורז 3 מ\"מ",
      "ג'ינג'ר לבן",
      "מגש 03",
      "מגש 07",
      "מחית צ'ילי בשמן",
      "מחית קארי ירוק",
      "מחית קארי אדום",
      "תמרהינדי",
      "מיסו לבן דאשי",
      "מירין גדול",
      "סויה ירוק גדול",
      "סויה ללג גדול",
      "סאקה גדול",
      "פנקו",
      "רוטב דגים 4 ל",
      "רוטב פטריות",
      "שומשום שחור",
      "שמן צ'ילי",
      "שמן שומשום",
      "קרם קוקוס גדול",
      "טמפורה",
      "יוזו גדול",
      "יוזו גדול ללא מלח",
      "סוכר דקלים",
      "צדפות שימורים",
      "בצל מטוגן",
      "אבקת חרדל יפני",
      "טוגראשי",
      "טום יאם",
      "קנפיו קילו",
      "מגש מסיבה L",
      "מגש מסיבה M",
      "סויה גולדן מאונטן",
      "חטיפי אצות",
      "סויה כהה",
      "חומץ אורז",
      "אנשובי בשמן גדול",
      "אצות נורי קוריאה",
      "אורז יסמין",
      "שיפודי קשר",
      "אבקת מאצה",
      "ליקר מאצה",
      "רשת לסיר אורז",
      "כף ווק",
      "ווק",
      "דפי רשת אורז",
      "אצות וואקמה",
      "אצות קומבו",
      "דאשי",
      "אררה",
      "צ’ופסטיקס חבק שחור",
      "שיפודי יקיטורי"
    ]
  },
  {
    "id": "diplomat",
    "name": "דיפלומט",
    "phone": "+972545650080",
    "email": "",
    "allowedBranches": [
      "הילס",
      "נורדאו"
    ],
    "orderToDelivery": {
      "שני": "חמישי",
      "חמישי": "שני"
    },
    "deliveryLockedDays": [],
    "flexibleOrder": false,
    "items": [
      "אורז סושי בוטאן",
      "אטריות שעועית",
      "מיונז היינץ SOM",
      "טופו קשה כחול",
      "דיספנסר אדום",
      "דיספנסר ירוק דל מלח",
      "קטשופ לחיצה היינץ",
      "סקיפי גדול",
      "צילי מתוק הלתי בוי",
      "צילי חריף הלתי בוי",
      "שיטאקי",
      "מחית פלפל קוראני",
      "סויה גדול 15.1",
      "סויה מנות TA",
      "סויה מנות ירוק TA",
      "מחית כמהין קטן"
    ]
  },
  {
    "id": "madag",
    "name": "מדג סי פרוט",
    "phone": "+972544335959",
    "email": "",
    "allowedBranches": [
      "הילס",
      "נורדאו"
    ],
    "orderToDelivery": {
      "שני": "חמישי",
      "חמישי": "שני"
    },
    "deliveryLockedDays": [],
    "flexibleOrder": false,
    "items": [
      "צלופח",
      "שרימפס וונמי",
      "טוביקו ירוק",
      "טוביקו שחור",
      "איקורא",
      "קאט פיש"
    ]
  },
  {
    "id": "creamcheese",
    "name": "קרים צ'יז",
    "phone": "+972546766364",
    "email": "",
    "allowedBranches": [
      "הילס"
    ],
    "orderToDelivery": {},
    "deliveryLockedDays": [
      "שני",
      "רביעי"
    ],
    "flexibleOrder": true,
    "items": [
      "קרים צ'יז",
      "בלוק חמאה צהובה",
      "פרמזן גוש"
    ]
  },
  {
    "id": "handels",
    "name": "הנדלס",
    "phone": "+972526010182",
    "email": "",
    "allowedBranches": [
      "הילס",
      "נורדאו"
    ],
    "orderToDelivery": {
      "שני": "רביעי",
      "חמישי": "שני"
    },
    "deliveryLockedDays": [],
    "flexibleOrder": false,
    "items": [
      "מעדן אווז"
    ]
  },
  {
    "id": "mrcake",
    "name": "מר קייק",
    "phone": "+972544748466",
    "email": "",
    "allowedBranches": [
      "הילס"
    ],
    "orderToDelivery": {},
    "deliveryLockedDays": [],
    "flexibleOrder": true,
    "items": [
      "מחית וניל",
      "שוקולד לבן",
      "מחית פטל קפוא",
      "סוכר אינוורטי",
      "נייר אפייה",
      "קסנטן",
      "אבץ",
      "פקטין NH"
    ]
  },
  {
    "id": "dishwasher",
    "name": "מדיח חגי",
    "phone": "+97239071742",
    "email": "",
    "allowedBranches": [
      "הילס",
      "נורדאו"
    ],
    "orderToDelivery": {},
    "deliveryLockedDays": [],
    "flexibleOrder": true,
    "items": [
      "מבריק",
      "סבון"
    ]
  },
  {
    "id": "dimsum",
    "name": "דים סאם",
    "phone": "+972585533322",
    "email": "",
    "allowedBranches": [
      "הילס",
      "נורדאו"
    ],
    "orderToDelivery": {
      "שני": "חמישי",
      "חמישי": "שלישי"
    },
    "deliveryLockedDays": [],
    "flexibleOrder": false,
    "items": [
      "באן כפפה"
    ]
  },
  {
    "id": "dipshivik",
    "name": "דיפ שיווק",
    "phone": "+972508873018",
    "email": "",
    "allowedBranches": [
      "הילס",
      "נורדאו"
    ],
    "orderToDelivery": {
      "שני": "חמישי",
      "חמישי": "שני"
    },
    "deliveryLockedDays": [],
    "flexibleOrder": false,
    "items": [
      "אבקת בצל",
      "אבקת שום",
      "פפריקה מתוקה",
      "אבקת סוכר",
      "קשיו מסוכר",
      "בוטן מטוגן שיקרצקי",
      "סילאן גאלון",
      "חרדל חלק דלי",
      "חומץ סינטטי לבן שקוף",
      "מונוסודיום",
      "מיונז הלמנס גדול",
      "שמן סויה פלסטיק",
      "מלח גס שרוול",
      "מלח דק שרוול",
      "מקלות קינמון",
      "מלח לימון ק",
      "סוכר לבן סוגת שרוול",
      "סוכר חום כהה",
      "אבקת אפיה",
      "פסיטוק מקולף שלם",
      "קמח תפוח אדמה",
      "קמח לבן שרוול",
      "קוקוס טחון לבן",
      "קורנפלור",
      "שומשום לבן",
      "ציר בקר משחה קנור",
      "רוטב נפאלי קנור",
      "דמי גלאס",
      "דבש",
      "כוכב אניס",
      "הל שלם",
      "זרעי כוסברה",
      "צלפים במלח",
      "בלסמי",
      "פירורי לחם 1 קג"
    ]
  },
  {
    "id": "hadf",
    "name": "חדפ",
    "phone": "+972543450109",
    "email": "",
    "allowedBranches": [
      "הילס",
      "נורדאו"
    ],
    "orderToDelivery": {
      "שני": "חמישי",
      "חמישי": "שני"
    },
    "deliveryLockedDays": [],
    "flexibleOrder": false,
    "items": [
      "כובע טבח מנייר",
      "מגבון לח אישי קראפט",
      "גליל דיווה",
      "נייר תעשייתי",
      "נוזל כלים מיקס 7",
      "נוזל רצפות 10 ל מיקס 2",
      "מסיר שומנים 108",
      "אקונומיקה",
      "תבליות מלח 25",
      "שקיות אשפה שחור",
      "נילון הפרדה",
      "שקית גופיה שחור",
      "נייר קופות",
      "כלורוסופט DL3",
      "כפפות ויניל ללא אבקה M",
      "כפפות וניל ללא אבקה L",
      "כפפות ניטריל שחור L",
      "סקוץ' יפני 36",
      "מטליות X70",
      "מילוי מטליות דלי",
      "סקוץ ברזלית 12",
      "ניילון נצמד 30 קטן",
      "ניילון נצמד 45 ארוך",
      "קיסם שחור עטוף",
      "קש שחור",
      "רדיד אלומניום",
      "שקיות שקילה 18/25",
      "שקיות שקילה 20/30",
      "שקיות שקילה 30/40",
      "שקית אוכל פשוט",
      "צץ רץ - רדיד אלומניום",
      "שק זילוף ירוק",
      "שקיות אפור 50\\70",
      "ניר קופה טרמי מדבקה",
      "מיקרופייבר שייני דקו",
      "סינר חד פעמי שטיפה",
      "נייר אפייה 30/50",
      "קערה מלבני קרפט 500",
      "קערה מלבני קרפט 750",
      "קערה מלבני קרפט 1000",
      "מכסה חם מלבני 500",
      "גביע קראפט 500",
      "מכסה לגביע קראפ 500",
      "קערה מרובע 1320",
      "מכסה מרובע חם 1320",
      "גביע רוטב מחובר 10 CC",
      "גביע רוטב מחובר 30 CC",
      "גביע רוטב מחובר 50 CC",
      "גביע רוטב מחובר 100 CC",
      "בל 500 מ\"ל",
      "בל 750 מ\"ל",
      "מפיות 40/40 לבן ספר",
      "מזלג קשיח שחור",
      "סכין קשיח שחור",
      "כף קשיח שחור",
      "מפיות קוקטייל שחור",
      "מפיות קוקטייל 893",
      "קופסא 1 ל",
      "קופסא 2 ל",
      "קופסא 4.5 ל",
      "מכסה 2 ל",
      "מכסה 4.5 ל",
      "צץ רץ מניפה slim",
      "צץ רץ 3 קימברלי",
      "סחבות רצפה",
      "כוס קראפט חום",
      "ספריי נירוסטה",
      "מטאטא בית",
      "מגב קטן",
      "מגב גדול",
      "יאה + מקל",
      "מקל עץ",
      "פרו 101"
    ]
  },
  {
    "id": "matamei",
    "name": "מטעמי ישראל",
    "phone": "+972547499403",
    "email": "",
    "allowedBranches": [
      "נורדאו"
    ],
    "orderToDelivery": {
      "שני": "חמישי",
      "חמישי": "שני"
    },
    "deliveryLockedDays": [],
    "flexibleOrder": false,
    "items": [
      "גיוזה פרגית",
      "גיוזה בקר",
      "גיוזה פטריות",
      "אטריות ראמן"
    ]
  },
  {
    "id": "icedream",
    "name": "אייס דרים",
    "phone": "+972542408000",
    "email": "",
    "allowedBranches": [
      "הילס",
      "נורדאו"
    ],
    "orderToDelivery": {
      "שני": "חמישי",
      "חמישי": "שני"
    },
    "deliveryLockedDays": [],
    "flexibleOrder": false,
    "items": [
      {
        "name": "מחית מנדרינה בוארון"
      },
      {
        "name": "מחית פסיפלורה בוארון"
      },
      {
        "name": "מחית תפוז דם בוארון"
      },
      {
        "name": "בלוברי קפוא",
        "cartonOnly": true
      },
      {
        "name": "פטל אדום קפוא",
        "cartonOnly": true
      },
      {
        "name": "אננס 2 קג"
      },
      {
        "name": "מנגו 2 קג"
      }
    ]
  }
];

// util: map english weekday to hebrew label
export const HEB_DAYS = ["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת"];

// compute default delivery for a given supplier and order day name
export function defaultDeliveryDay(supplierId, orderDayName) {
  const s = SUPPLIERS.find(x => x.id === supplierId);
  if (!s) return orderDayName;
  // if supplier has specific order->delivery mapping, use it
  if (s.orderToDelivery && s.orderToDelivery[orderDayName]) {
    return s.orderToDelivery[orderDayName];
  }
  // if deliveryLockedDays only (like 'קרים צ'יז'): default to nearest locked day >= order
  if (s.deliveryLockedDays && s.deliveryLockedDays.length) {
    const idx = HEB_DAYS.indexOf(orderDayName);
    for (let i=0;i<7;i++) {
      const d = HEB_DAYS[(idx+i)%7];
      if (s.deliveryLockedDays.includes(d)) return d;
    }
  }
  // otherwise same day
  return orderDayName;
}

// helper that returns which suppliers should order today based on their rules
export function suppliersToOrderToday(todayName) {
  return SUPPLIERS.filter(s => {
    if (s.flexibleOrder) return false; // לא מופיעים ברשימת "להזמין היום"
    return Object.keys(s.orderToDelivery||{}).includes(todayName);
  });
}

// helper that returns which suppliers deliver today (split by branch)
export function deliveriesTodayByBranch(todayName) {
  const perBranch = {"הילס":[], "נורדאו":[]};
  SUPPLIERS.forEach(s => {
    // any mapping X->today
    const has = Object.entries(s.orderToDelivery||{}).some(([order,delivery]) => delivery===todayName);
    const lockedOnly = (s.deliveryLockedDays||[]).includes(todayName);
    const delivers = has || lockedOnly;
    if (delivers) {
      (s.allowedBranches||BRANCHES).forEach(b=>perBranch[b].push(s));
    }
  });
  return perBranch;
};

