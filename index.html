<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>Order Room</title>
  <link rel="icon" href="assets/icons/home.svg">
  <link rel="stylesheet" href="styles.css?v=1.5.3">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="or.config.js?v=1.5.3" defer></script>
  <script src="supabase.js?v=1.5.3" defer></script>
  <script src="app.js?v=1.5.3" defer></script>
</head>
<body class="or-shell">

  <header class="or-header">
    <img class="logo" src="assets/logo_black.svg" alt="Sushi Room">
    <div class="title">Order Room</div>
  </header>

  <main id="app" class="or-main">
    <section id="view-home" class="view active">
      <h1 class="h-xl">בית</h1>
      <p class="muted">בחר ספק כדי לפתוח הזמנה.</p>
      <div id="home-suppliers" class="cards-grid"></div>

      <div class="section">
        <h2 class="h-lg">הזמנות אחרונות</h2>
        <div id="home-recent" class="list"></div>
      </div>
    </section>

    <section id="view-orders" class="view">
      <div class="toolbar">
        <button class="btn ghost" id="btn-back-home">↩</button>
        <h1 id="orders-title" class="h-xl">הזמנה</h1>
      </div>

      <div id="branch-toggle" class="segmented"></div>

      <div id="items-list" class="items-list"></div>

      <div class="notes-box">
        <label>הערות להזמנה</label>
        <textarea id="order-notes" placeholder="שדות ריקים לא יופיעו בהודעה. דוגמה: לא לפרוס סלמון, להוסיף כמות נוספת לסלמון מגש 07..."></textarea>
      </div>

      <div class="order-actions">
        <button id="btn-save" class="btn primary">שמור הזמנה</button>
        <button id="btn-copy" class="btn">העתק הזמנה</button>
        <button id="btn-whatsapp" class="btn success">שלח בוואטסאפ</button>
      </div>
    </section>

    <section id="view-history" class="view">
      <h1 class="h-xl">היסטוריה</h1>
      <div class="filters-row">
        <input id="history-search" class="input" placeholder="חיפוש לפי ספק/סניף">
        <button id="history-refresh" class="btn">רענן</button>
      </div>
      <div id="history-list" class="list"></div>
    </section>

    <section id="view-settings" class="view">
      <h1 class="h-xl">הגדרות</h1>
      <div class="card">
        <div class="row">
          <div>משתמש</div>
          <div id="settings-email" class="muted"></div>
        </div>
        <div class="row">
          <button id="btn-signout" class="btn danger">יציאה מהמערכת</button>
        </div>
      </div>

      <div class="card">
        <h2 class="h-lg">בדיקת חיבור</h2>
        <div id="conn-status" class="muted">בודק...</div>
      </div>
    </section>
  </main>

  <nav class="tabbar">
    <button data-view="home" class="tab active">
      <img src="assets/icons/home.svg" alt="" class="ico">
      <span>בית</span>
    </button>
    <button data-view="orders" class="tab">
      <img src="assets/icons/orders.svg" alt="" class="ico">
      <span>הזמנות</span>
    </button>
    <button data-view="history" class="tab">
      <img src="assets/icons/history.svg" alt="" class="ico">
      <span>היסטוריה</span>
    </button>
    <button data-view="settings" class="tab">
      <img src="assets/icons/settings.svg" alt="" class="ico">
      <span>הגדרות</span>
    </button>
  </nav>

  <div id="auth-modal" class="modal hidden">
    <div class="modal-panel">
      <button id="auth-close" class="x">×</button>
      <h2 class="h-xl">התחברות</h2>
      <div class="segmented small">
        <button class="seg active" data-auth="login">כניסה</button>
        <button class="seg" data-auth="signup">הרשמה</button>
      </div>
      <label class="lbl">אימייל</label>
      <input id="auth-email" class="input" type="email" placeholder="you@example.com">
      <label class="lbl">סיסמה</label>
      <input id="auth-pass" class="input" type="password" placeholder="••••••••">
      <div class="row spaced">
        <button id="btn-auth-submit" class="btn primary grow">כניסה</button>
        <button id="btn-magic" class="btn ghost">שלח לינק במייל</button>
      </div>
      <div id="auth-msg" class="muted mt"></div>
      <div id="config-warning" class="warn hidden">לא הוגדר Supabase URL / Anon Key</div>
    </div>
  </div>

</body>
</html>
