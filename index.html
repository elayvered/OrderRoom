<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Order Room – מערכת ניהול הזמנות והספקים החכמה של סושירום</title>
  <link rel="icon" href="favicon.ico" />
  <link rel="stylesheet" href="style.css?v=1.1.1" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo-circle" aria-label="Order Room">
        <svg viewBox="0 0 24 24" width="22" height="22" fill="#fff" opacity=".96">
          <path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20Zm0 3.2a6.8 6.8 0 1 1 0 13.6 6.8 6.8 0 0 1 0-13.6Z"/>
        </svg>
      </div>
      <div class="brand-text">
        <div class="title">Order Room</div>
        <div class="sub">מערכת ניהול הזמנות והספקים החכמה של סושירום</div>
      </div>
      <div class="header-date" id="headerDate"></div>
    </div>
  </header>

  <main class="container">
    <!-- HOME -->
    <section id="view-home" class="screen active">
      <h3>היום</h3>
      <div class="home-cards" id="homeCards"></div>
      <div class="hint">בחר ספק כדי לפתוח הזמנה</div>
    </section>

    <!-- ORDERS -->
    <section id="view-orders" class="screen">
      <div class="toolbar">
        <div class="supplier-switch">
          <label>ספק:</label>
          <select id="activeSupplierSwitch"></select>
        </div>
        <button class="btn primary" id="btnSave">שמור הזמנה</button>
        <button class="btn" id="btnWhatsApp">שלח בוואטסאפ</button>
        <button class="btn" id="btnCopy">העתק נוסח</button>
      </div>
      <div class="hint">שדות כמות ריקים לא יופיעו בהודעה. "קודם" מציג את הכמות מההזמנה האחרונה לפריט.</div>
      <div id="ordersGrid" class="grid" role="list"></div>
      <div class="panel notes">
        <label for="orderNotes" class="hint">הערות חופשיות להזמנה (יופיעו בסוף ההודעה):</label>
        <textarea id="orderNotes" placeholder="למשל: לא לפרוס סלמון, להוסיף מכסה ל׳מגש 07׳..."></textarea>
      </div>
      <div class="panel">
        <div class="panel-head">
          <h4>תצוגת נוסח</h4>
          <div id="summaryCount" class="muted">סה״כ פריטים: 0</div>
        </div>
        <pre id="preview" class="whats"></pre>
      </div>
    </section>

    <!-- HISTORY -->
    <section id="view-history" class="screen">
      <h3>היסטוריה</h3>
      <div id="historyList" class="list"></div>
    </section>

    <!-- ANALYTICS -->
    <section id="view-analytics" class="screen">
      <h3>נתונים</h3>
      <div class="filters-row">
        <label>מטווח תאריכים: <input type="date" id="fromDate" />–<input type="date" id="toDate" /></label>
        <button class="btn" id="btnRange">הצג</button>
        <button class="btn" id="btnThisMonth">חודש נוכחי</button>
      </div>
      <div class="panel"><canvas id="chartBar" style="height:300px"></canvas></div>
      <div id="analyticsBox" class="list"></div>
    </section>

    <!-- SETTINGS -->
    <section id="view-settings" class="screen">
      <h3>הגדרות</h3>
      <div class="item">
        <h4>ניהול ספקים</h4>
        <div class="hint">בחר יום הזמנה לכל ספק. כרטיסי הספקים במסך הבית יוצגו לפי היום.</div>
        <div id="suppliersList" class="list"></div>
        <div class="supplier-form">
          <input id="supName" class="text" placeholder="שם ספק (לדוג׳: מזרח מערב)" />
          <input id="supPhone" class="text" placeholder="מס׳ וואטסאפ בינ״ל (ללא +) – לדוג׳: 97250..." />
          <select id="supDay" class="text">
            <option value="all">כל הימים</option>
            <option value="0">ראשון</option>
            <option value="1">שני</option>
            <option value="2">שלישי</option>
            <option value="3">רביעי</option>
            <option value="4">חמישי</option>
            <option value="5">שישי</option>
            <option value="6">שבת</option>
          </select>
          <button class="btn" id="btnAddSupplier">הוסף/עדכן ספק</button>
        </div>
      </div>
      <div class="item">
        <h4>ניהול פריטים</h4>
        <div class="hint">עריכת פריטים לכל ספק.</div>
        <div class="item-form">
          <input id="itmName" class="text" placeholder="שם פריט" />
          <input id="itmUnit" class="text" placeholder="יח׳ מידה (יח׳/ק״ג/ל׳/...)" />
          <input id="itmPrice" class="text" placeholder="מחיר ליחידה (₪)" />
          <select id="itmSupplier" class="text"></select>
          <button class="btn" id="btnAddItem">הוסף/עדכן פריט</button>
        </div>
        <div id="itemsTable" class="table"></div>
      </div>
    </section>
  </main>

  <nav class="nav">
    <div class="bar">
      <button class="tab active" data-target="view-home" title="בית">
        <svg viewBox="0 0 24 24" fill="none" stroke-width="2"><path d="M3 10.5 12 3l9 7.5"/><path d="M5 10v10h14V10"/></svg>
        <div class="label">בית</div>
      </button>
      <button class="tab" data-target="view-orders" title="הזמנות">
        <svg viewBox="0 0 24 24" fill="none" stroke-width="2"><path d="M8 6h13"/><path d="M8 12h13"/><path d="M8 18h13"/><path d="M3 6h.01"/><path d="M3 12h.01"/><path d="M3 18h.01"/></svg>
        <div class="label">הזמנות</div>
      </button>
      <button class="tab" data-target="view-history" title="היסטוריה">
        <svg viewBox="0 0 24 24" fill="none" stroke-width="2"><path d="M3 3v5h5"/><path d="M3.05 13A9 9 0 1 0 6 5.3"/><path d="M12 7v5l3 3"/></svg>
        <div class="label">היסטוריה</div>
      </button>
      <button class="tab" data-target="view-analytics" title="נתונים">
        <svg viewBox="0 0 24 24" fill="none" stroke-width="2"><path d="M3 3v18h18"/><path d="M7 15v-5"/><path d="M12 15v-8"/><path d="M17 15v-3"/></svg>
        <div class="label">נתונים</div>
      </button>
      <button class="tab" data-target="view-settings" title="הגדרות">
        <svg viewBox="0 0 24 24" fill="none" stroke-width="2"><circle cx="12" cy="12" r="3.5"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1Z"/></svg>
        <div class="label">הגדרות</div>
      </button>
    </div>
  </nav>

  <div id="toast" class="toast"><div class="box" id="toastMsg"></div></div>
  <script src="script.js?v=1.1.1"></script>
</body>
</html>
